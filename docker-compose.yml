services:
  subtrackr:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_SUPABASE_URL: ${VITE_SUPABASE_URL}
        VITE_SUPABASE_ANON_KEY: ${VITE_SUPABASE_ANON_KEY}
        VITE_N8N_WEBHOOK_URL: ${VITE_N8N_WEBHOOK_URL}
        VITE_N8N_API_KEY: ${VITE_N8N_API_KEY}
    container_name: subtrackr
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.subtrackr.rule=Host(`mrcn.cloud`) || Host(`www.mrcn.cloud`)"
      - "traefik.http.routers.subtrackr.entrypoints=websecure"
      - "traefik.http.routers.subtrackr.tls=true"
      - "traefik.http.routers.subtrackr.tls.certresolver=mytlschallenge"
      - "traefik.http.services.subtrackr.loadbalancer.server.port=80"
    networks:
      - root_default

networks:
  root_default:
    external: true
